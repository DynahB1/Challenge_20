(this["webpackJsonpremix-plugin"]=this["webpackJsonpremix-plugin"]||[]).push([[0],{166:function(e,t,n){},171:function(e,t){},172:function(e,t){},192:function(e,t){},203:function(e,t,n){},204:function(e,t,n){},205:function(e,t,n){},206:function(e,t,n){},207:function(e,t,n){},208:function(e,t,n){},209:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(64),o=n.n(c),s=n(3),i=n(65),l=n(35),u=n(4),p=n(8),d=(n(166),n(19)),j={"goerli-alpha":"https://goerli.voyager.online/contract","mainnet-alpha":"https://voyager.online/contract",devnet:""},b=function(){var e=Object(d.randomAddress)();return"\n  // Right click on the script name and hit \"Run\" to execute\n  (async () => {\n      try {\n          console.log('deploy to starknet...')\n          const compiledCairoContract = await remix.call('fileManager', 'readFile', 'compiled_cairo_artifacts/contract.json');\n          const compiledContract = starknet.json.parse(compiledCairoContract);\n          const NetworkBaseUrls = {\n            'goerli-alpha': 'https://alpha4.starknet.io',\n            'mainnet-alpha': 'https://alpha-mainnet.starknet.io'\n          }\n\n          const payload = {\n            compiledContract: compiledContract,\n            transactionInputs: [], // if you have constructor args please add your args\n            network: 'goerli-alpha' // mainnet-alpha or goerli-alpha or devnet\n          };\n\n          const baseUrl = payload['network'] ? NetworkBaseUrls[payload['network']] : payload['baseUrl'];\n\n          const response = await fetch(baseUrl + '/gateway/add_transaction', {\n              method: 'POST',\n              headers: {\n                accept: 'application/json',\n              },\n              body: JSON.stringify({\n                type: 'DEPLOY',\n                contract_address_salt: '".concat(e,"',\n                contract_definition: payload.compiledContract.contract_definition,\n                constructor_calldata: payload.transactionInputs\n              })\n            });\n\n          const responseData = await response.json();\n\n          //  const methodResponse = await callContract({\n          //    contract_address: responseData.address,\n          //    entry_point_selector: getSelectorFromName(\"YOUR_FUNCTION_NAME\"),\n          //    calldata: [\"1\"],\n          //  });\n  \n          // const result = methodResponse.result[0];\n          // result contains the return value of the method you gave to callContract\n          if(response.status === 200) {\n            console.log('Deployed contract address: ', responseData.address)\n            console.log('Deployed contract transaction hash: ', responseData.transaction_hash)\n            console.log('Deployment successful.')\n          } else {\n            console.log('Deployed contract error: ', responseData)\n            console.log('Deployment failed.')\n          }\n          \n      } catch (exception) {\n          console.log(exception.message)\n      }\n  })()\n  ")},h="./scripts",O="deploy.js",f=n(0);var m=function(e){var t=e.remixClient,n=e.compiledContract,r=Object(a.useState)(O),c=Object(s.a)(r,2),o=c[0],i=c[1],l=Object(a.useState)(!1),d=Object(s.a)(l,2),j=d[0],m=d[1],v=function(){var e=Object(p.a)(Object(u.a)().mark((function e(){return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o||i(O),e.next=3,t.call("fileManager","writeFile","compiled_cairo_artifacts/contract.json",JSON.stringify(n));case 3:return e.next=5,t.call("fileManager","writeFile","".concat(h,"/").concat(o||O),b()).then((function(){return m(!0)}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:"deployScriptName",children:[Object(f.jsx)("label",{children:"SCRIPT FILE NAME"}),Object(f.jsx)("input",{className:"scriptFileNameInput",value:o,placeholder:O,onChange:function(e){return t=e.target.value,i(t),void m(!1);var t},type:"text"})]}),n?Object(f.jsx)("div",{role:"button",className:"createScriptFile",onClick:function(){return v()},children:"Create deploy script"}):null,j?Object(f.jsxs)("p",{className:"createdScriptPath",children:["Created script at ","".concat(h,"/").concat(o)]}):null]})},v=(n(203),{"goerli-alpha":"https://alpha4.starknet.io","mainnet-alpha":"https://alpha-mainnet.starknet.io"}),x=function(){var e=Object(p.a)(Object(u.a)().mark((function e(t){var n;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.network?v[t.network]:t.baseUrl,e.abrupt("return",fetch("".concat(n,"/gateway/add_transaction"),{method:"POST",headers:{accept:"application/json"},body:JSON.stringify({type:"DEPLOY",contract_address_salt:Object(d.randomAddress)(),contract_definition:t.compiledContract.contract_definition,constructor_calldata:t.transactionInputs})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=n(20),C=n(36);n(204);var y=function(e){var t=e.inputs,n=e.onInputValueChange,r=Object(a.useState)({}),c=Object(s.a)(r,2),o=c[0],i=c[1];return Object(f.jsxs)("div",{className:"constructorInputsFormContainer",children:[Object(f.jsx)("label",{children:"CONTRACT CONSTRUCTOR ARGUMENTS"}),t.map((function(e){return Object(f.jsxs)("div",{className:"constructorInput",children:[Object(f.jsxs)("label",{className:"argumentLabel",children:[e.name,": ",e.type]}),Object(f.jsx)("input",{type:"text",value:o[e.name]||"",onChange:function(t){return function(e,t){var a=Object(C.a)(Object(C.a)({},o),{},Object(g.a)({},t,e));i(a),n(a)}(t.target.value,e.name)}})]},e.name)}))]})};n(205);var N=function(e){var t=e.deployedContract,n=e.isDevnet,a=e.selectedNetwork;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("p",{children:"Deployed contract address"}),Object(f.jsx)("p",{className:"contractAddress",children:t.address}),Object(f.jsx)("p",{children:"Tx Hash"}),Object(f.jsx)("p",{className:"contractTransactionHash",children:t.transaction_hash}),n()?null:Object(f.jsx)("p",{children:Object(f.jsx)("a",{className:"viewOnVoyagerLink",href:"".concat(j[a],"/").concat(t.address),target:"_blank",rel:"noreferrer",children:"View on Voyager"})})]})},k=(n(206),function(e){var t=e.message;return Object(f.jsx)("div",{className:"cairoErrorBlob",children:Object(f.jsx)("div",{className:"cairoError alertDanger",children:Object(f.jsx)("pre",{children:Object(f.jsx)("span",{className:"errorContent",children:t})})})})});var w=function(e){var t=e.isDevnet,n=e.selectedNetwork,r=e.compiledContract,c=e.constructorInputs,o=Object(a.useState)(""),i=Object(s.a)(o,2),l=i[0],d=i[1],j=Object(a.useState)(!1),b=Object(s.a)(j,2),h=b[0],O=b[1],m=Object(a.useState)(!1),v=Object(s.a)(m,2),g=v[0],C=v[1],w=Object(a.useState)(!1),S=Object(s.a)(w,2),_=S[0],D=S[1],I=Object(a.useState)(void 0),T=Object(s.a)(I,2),F=T[0],R=T[1],E=Object(a.useState)([]),U=Object(s.a)(E,2),A=U[0],M=U[1],P=function(){var e=Object(p.a)(Object(u.a)().mark((function e(){var a,o,s,i;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r&&(!t()||l)){e.next=2;break}return e.abrupt("return");case 2:if(!t()||l.startsWith("https://")){e.next=4;break}return e.abrupt("return",O(!0));case 4:return R(void 0),C(null),D(!0),a=(c||[]).map((function(e){return A[e.name]||null})),o={compiledContract:r,transactionInputs:a},t()?o.baseUrl=l:o.network=n,e.prev=10,e.next=13,x(o);case 13:return s=e.sent,e.next=16,s.json();case 16:i=e.sent,200===s.status?R(i):L(i),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(10),console.log(e.t0);case 23:D(!1);case 24:case"end":return e.stop()}}),e,null,[[10,20]])})));return function(){return e.apply(this,arguments)}}(),L=function(e){var t=e.toString();null!==e&&void 0!==e&&e.message?t=null===e||void 0===e?void 0:e.message:t.includes("Network Error")&&(t="Error: Request failed with status code 404"),C(t)};return Object(f.jsxs)(f.Fragment,{children:[t()&&Object(f.jsxs)("div",{className:"devnetBaseUrl",children:[Object(f.jsx)("label",{children:"Devnet URL"}),Object(f.jsx)("input",{value:l,onChange:function(e){return t=e.target.value,d(t),void O(!1);var t},type:"text"}),h?Object(f.jsx)(k,{message:"Please check Devnet URL: The url should be only with https protocol"}):null]}),c?Object(f.jsx)(y,{inputs:c,onInputValueChange:function(e){return M(e)}}):null,Object(f.jsx)("div",{role:"button",className:"deployContract","aria-disabled":t()&&!l,onClick:P,children:"Deploy"}),_?Object(f.jsx)("p",{className:"deployingText",children:"Deploying..."}):null,F&&!_?Object(f.jsx)(N,{isDevnet:t,selectedNetwork:n,deployedContract:F}):null,!!g&&Object(f.jsx)(k,{message:g})]})},S=(n(207),["cairo"]);var _=function(e){var t=e.remixClient,n=e.onContractChange,r=e.onConstructorInputsChange,c=Object(a.useState)(""),o=Object(s.a)(c,2),i=o[0],l=o[1],d=Object(a.useState)(!1),j=Object(s.a)(d,2),b=j[0],h=j[1],O=Object(a.useState)(!1),m=Object(s.a)(O,2),v=m[0],x=m[1],g=Object(a.useState)(null),C=Object(s.a)(g,2),y=C[0],N=C[1];Object(a.useEffect)((function(){setTimeout((function(){t.on("fileManager","currentFileChanged",(function(e){console.log(e);var t=e.split("/").pop(),n=t.split(".").pop()||"";h(!S.includes(n)),l(t)}))}),1e3)}),[t]);var w=function(){var e=Object(p.a)(Object(u.a)().mark((function e(n){var a,r,c;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N(n),a=n.split(":"),r=+a[2],c=+a[3],!isNaN(r)&&!isNaN(c)){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,t.editor.addAnnotation({row:r-1,column:c,text:n,type:"error"});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(p.a)(Object(u.a)().mark((function e(){var a,c,o;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!b){e.next=2;break}return e.abrupt("return");case 2:return n(null),r(null),h(!1),N(null),e.prev=6,e.next=9,t.call("fileManager","getCurrentFile");case 9:a=e.sent,e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(6),h(!0),e.abrupt("return");case 16:if(c=a.split(".").pop()||"",S.includes(c)){e.next=20;break}return h(!0),e.abrupt("return");case 20:return e.next=22,t.call("fileManager","readFile",a);case 22:o=e.sent,x(!0),D(o);case 25:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(p.a)(Object(u.a)().mark((function e(a){var r,c;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.editor.clearAnnotations();case 2:return e.prev=2,e.next=5,fetch("https://2uuf49xjkk.execute-api.us-east-2.amazonaws.com/prod/cairo",{method:"POST",headers:{accept:"application/json"},body:JSON.stringify({action:"compile-contract",code:a})});case 5:return r=e.sent,e.next=8,r.json();case 8:if(c=e.sent,x(!1),!c.error){e.next=13;break}return w(c.error),e.abrupt("return");case 13:I(c),n(c),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),console.error(e.t0);case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(t){return e.apply(this,arguments)}}(),I=function(e){var t,n=e.contract_definition.abi.find((function(e){return"constructor"===e.name}));n&&null!==n&&void 0!==n&&null!==(t=n.inputs)&&void 0!==t&&t.length&&r(n.inputs)};return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{role:"button",className:"compileContract","aria-disabled":b||!i,onClick:_,children:v?"Compiling ".concat(i,"..."):"Compile ".concat(i)}),b||!i?Object(f.jsx)("p",{className:"fileIsNotSelected",children:"Please select file containing Cairo contract"}):null,y?Object(f.jsx)(k,{message:y}):null]})},D=(n(208),Object(i.createClient)(new l.PluginClient));var I=function(){var e=Object(a.useState)(null),t=Object(s.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(null),o=Object(s.a)(c,2),i=o[0],l=o[1],u=Object(a.useState)("goerli-alpha"),p=Object(s.a)(u,2),d=p[0],j=p[1];return Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)(_,{remixClient:D,onConstructorInputsChange:function(e){return l(e)},onContractChange:function(e){return r(e)}}),n?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:"networkSelect",children:[Object(f.jsx)("label",{children:"STARKNET NETWORK"}),Object(f.jsxs)("select",{value:d,onChange:function(e){return j(e.target.value)},children:[Object(f.jsx)("option",{value:"mainnet-alpha",children:"mainnet-alpha"}),Object(f.jsx)("option",{value:"goerli-alpha",children:"goerli-alpha"}),Object(f.jsx)("option",{value:"devnet",children:"Deploy to Local Devnet"})]})]}),Object(f.jsx)(w,{compiledContract:n,selectedNetwork:d,constructorInputs:i,isDevnet:function(){return"devnet"===d}}),Object(f.jsx)(m,{remixClient:D,compiledContract:n})]}):null]})};o.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(I,{})}),document.getElementById("root"))}},[[209,1,2]]]);
//# sourceMappingURL=main.cce95721.chunk.js.map